var postsApp=function(){return{load:function(){let e=window.location.hash.split("-");switch(e[0]){case"#create":document.getElementById("app").innerHTML='\n      <div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">New Post</h2>\n          <div class="float-right">\n            <a href="#" class="btn btn-primary">Cancel</a>\n          </div>\n        </div>\n        <div class="card-body">\n          <form id="createPost" class="card-body">\n            <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n            <div class="row">\n              <div class="form-group col-md-6">\n                <label for="title">Title</label>\n                <input type="text" id="title" name="title" class="form-control" required>\n              </div>\n              <div class="form-group col-md-6">\n                <label for="timeframe">Timeframe</label>\n                <input type="datetime-local" id="timeframe" name="timeframe" class="form-control" required>\n              </div>\n            </div>\n            <div class="row">\n              <div class="form-group col-md">\n                <label for="body">Story</label>\n                <textarea id="body" name="body" class="form-control" rows="6" required></textarea>\n              </div>\n            </div>\n            <div class="row">\n              <div class="form-group col-md-6">\n                <label for="description">Summary</label>\n                <input type="text" id="description" name="description" class="form-control" required>\n              </div>\n              <div class="form-group col-md-6">\n                <label for="keywords">Keywords (separated by commas)</label>\n                <input type="text" id="keywords" name="keywords" class="form-control" required>\n              </div>\n              <div class="form-group col-md-6">\n              <label for="caption">Caption</label>\n              <input type="text" id="caption" name="caption" class="form-control" required>\n            </div>\n            <div class="form-group col-md-6">\n              <label for="quote">Quote</label>\n              <input type="text" id="quote" name="quote" class="form-control" required>\n            </div>\n            <div class="form-group col-md-6">\n            <label for="image">Attach Image</label>\n            <input type="text" id="image" name="image" class="form-control" required>\n          </div>\n            </div>\n            <div class="text-right">\n              <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n            </div>\n          </form>\n        </div>\n      </div>\n    ',function(e,t){let n=document.getElementById(e);n.addEventListener("submit",function(e){e.preventDefault();let a=new FormData(n),o=`${window.location.origin}${t}`,i=new XMLHttpRequest;i.open("POST",o),i.setRequestHeader("Content-Type","application/json; charset=UTF-8");let d={};a.forEach(function(e,t){d[t]=e}),i.send(JSON.stringify(d)),i.onload=function(){let e=JSON.parse(i.response);!0===e.success?window.location.hash=`#view-${e.slug}`:document.getElementById("formMsg").style.display="block"}})}("createPost","/api/posts");break;case"#view":!function(e){let t=`${window.location.origin}/api/posts/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),a="";a=`<div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">${t.post.title}</h2>\n          <div class="float-right">\n            <a href="#edit-${t.post._id}" class="btn btn-primary">Edit</a>\n          </div>\n        </div>\n        <div class="card-body">\n          <div class="blockquote">${t.post.quote}</div>\n          <br>\n          <div>${t.post.caption}</div>\n          <div>${t.post.body}</div>\n          <div>Tagged: <em>${t.post.keywords}</em></div>\n        </div>\n      </div>\n      `,e.innerHTML=a}}(e[1]);break;case"#edit":console.log("EDIT");break;case"#delete":console.log("DELETE");break;default:!function(){let e=`${window.location.origin}/api/posts`,t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response).posts,a="",o="";for(let e=0;e<n.length;e++)o=o+`<tr>\n          <td>\n            <a href="#view-${n[e].slug}">${n[e].title}</a>\n          </td>\n          <td>${n[e].description}</td>\n          <td>${n[e].caption}</td>\n          <td>${n[e].body}</td>\n          <td>${n[e].quote}</td>\n          <td>`+(n[e].timeframe?`${n[e].timeframe.slice(0,19).replace("T"," ")}`:"No Timeframe Date Set")+"\n          </td>\n        </tr>";a=`<div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">Posts</h2>\n          <div class="float-right">\n            <a href="#create" class="btn btn-primary">New Post</a>\n          </div>\n        </div>\n        <div class="table-responsive">\n          <table class="table table-striped table-hover table-bordered">\n            <thead>\n              <tr>\n                <td>Title</td>\n                <td>Description</td>\n                <td>Caption</td>\n                <td>Body</td>\n                <td>Quote</td>\n                <td>Timeframe</td>\n              </tr>\n            </thead>\n            <tbody>${o}</tbody>\n          </table>\n        </div>\n      </div>`,e.innerHTML=a}}()}}}}();postsApp.load(),window.addEventListener("hashchange",function(){postsApp.load()});